{"ast":null,"code":"import _taggedTemplateLiteral from \"/Volumes/Ravenclaw/_d_Development/Work/django-react-graphql-boilerplate/django-react-boilerplate/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Volumes/Ravenclaw/_d_Development/Work/django-react-graphql-boilerplate/django-react-boilerplate/src/index.js\";\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n    {\\n      isLoggedIn @client\\n    }\\n  \"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  {\\n    isLoggedIn @client\\n  }\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport Auth from \"./components/Auth\"; // import { ApolloProvider, Query } from \"react-apollo\";\n\nimport ApolloClient, { gql, InMemoryCache } from \"apollo-boost\";\nimport { ApolloProvider, useQuery } from \"@apollo/react-hooks\";\nimport * as serviceWorker from \"./serviceWorker\"; // uri: \"http://example.herokuapp.com/graphql/\"\n// !Apollo Client is available to the entire app\n// ! fetchOptions: {credentials: 'include' - means to include operation.headers (just below in the request)}\n\nconst cache = new InMemoryCache();\nconst client = new ApolloClient({\n  uri: \"http://localhost:8000/graphql/\",\n  cache,\n  fetchOptions: {\n    credentials: \"include\"\n  },\n  request: operation => {\n    const token = localStorage.getItem(\"authToken\") || \"\";\n    operation.setContext({\n      headers: {\n        Authorization: \"JWT \".concat(token)\n      }\n    });\n  }\n});\ncache.writeData({\n  data: {\n    isLoggedIn: !!localStorage.getItem(\"authToken\")\n  }\n});\nconst IS_LOGGED_IN_QUERY = gql(_templateObject()); // ! Change the turnary below to include an authorization page, or whatever the user should see if they are not logged in.\n// ReactDOM.render(\n//   <ApolloProvider client={client}>\n//     <Query query={IS_LOGGED_IN_QUERY}>\n//       {({ data }) => (data.isLoggedIn ? <App /> : <Auth />)}\n//     </Query>\n//   </ApolloProvider>,\n//   document.getElementById(\"root\")\n// );\n\nconst ApolloApp = client => {\n  const _useQuery = useQuery(gql(_templateObject2())),\n        data = _useQuery.data,\n        loading = _useQuery.loading,\n        error = _useQuery.error;\n\n  return React.createElement(ApolloProvider, {\n    client: client,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, ({\n    data\n  }) => data.isLoggedIn ? React.createElement(App, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }) : React.createElement(Auth, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }));\n};\n\nReactDOM.render(React.createElement(ApolloApp, {\n  client: client,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 70\n  },\n  __self: this\n}), document.getElementById(\"root\")); // If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.unregister(); // const client = new ApolloClient({\n//   uri: \"http://localhost:8000/graphql/\",\n//   fetchOptions: {\n//     credentials: \"include\"\n//   },\n//   request: operation => {\n//     const token = localStorage.getItem('authToken') || \"\";\n//     operation.setContext({\n//       headers: {\n//         Authorization: `JWT ${token}`\n//       }\n//     })\n//   },\n//   clientState: {\n//     defaults: {\n//       // !The double bangs converts any value to a boolean\n//       isLoggedIn: !!localStorage.getItem(\"authToken\")\n//     }\n//   }\n// });\n// Does a query on the client (not the server) and the returned value (boolean) determines what the user sees, in this case home page or authorization page\n// const IS_LOGGED_IN_QUERY = gql`\n//   query {\n//     isLoggedIn @client\n//   }\n// `;","map":{"version":3,"sources":["/Volumes/Ravenclaw/_d_Development/Work/django-react-graphql-boilerplate/django-react-boilerplate/src/index.js"],"names":["React","ReactDOM","App","Auth","ApolloClient","gql","InMemoryCache","ApolloProvider","useQuery","serviceWorker","cache","client","uri","fetchOptions","credentials","request","operation","token","localStorage","getItem","setContext","headers","Authorization","writeData","data","isLoggedIn","IS_LOGGED_IN_QUERY","ApolloApp","loading","error","render","document","getElementById","unregister"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,aAAP;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAOC,IAAP,MAAiB,mBAAjB,C,CAEA;;AACA,OAAOC,YAAP,IAAuBC,GAAvB,EAA4BC,aAA5B,QAAiD,cAAjD;AACA,SAASC,cAAT,EAAyBC,QAAzB,QAAyC,qBAAzC;AAEA,OAAO,KAAKC,aAAZ,MAA+B,iBAA/B,C,CACA;AAEA;AACA;;AACA,MAAMC,KAAK,GAAG,IAAIJ,aAAJ,EAAd;AACA,MAAMK,MAAM,GAAG,IAAIP,YAAJ,CAAiB;AAC9BQ,EAAAA,GAAG,EAAE,gCADyB;AAE9BF,EAAAA,KAF8B;AAG9BG,EAAAA,YAAY,EAAE;AACZC,IAAAA,WAAW,EAAE;AADD,GAHgB;AAM9BC,EAAAA,OAAO,EAAEC,SAAS,IAAI;AACpB,UAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,KAAqC,EAAnD;AACAH,IAAAA,SAAS,CAACI,UAAV,CAAqB;AACnBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,gBAASL,KAAT;AADN;AADU,KAArB;AAKD;AAb6B,CAAjB,CAAf;AAgBAP,KAAK,CAACa,SAAN,CAAgB;AACdC,EAAAA,IAAI,EAAE;AACJC,IAAAA,UAAU,EAAE,CAAC,CAACP,YAAY,CAACC,OAAb,CAAqB,WAArB;AADV;AADQ,CAAhB;AAMA,MAAMO,kBAAkB,GAAGrB,GAAH,mBAAxB,C,CAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMsB,SAAS,GAAGhB,MAAM,IAAI;AAAA,oBACOH,QAAQ,CAACH,GAAD,qBADf;AAAA,QAClBmB,IADkB,aAClBA,IADkB;AAAA,QACZI,OADY,aACZA,OADY;AAAA,QACHC,KADG,aACHA,KADG;;AAO1B,SACE,oBAAC,cAAD;AAAgB,IAAA,MAAM,EAAElB,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAAC;AAAEa,IAAAA;AAAF,GAAD,KAAeA,IAAI,CAACC,UAAL,GAAkB,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAlB,GAA4B,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD9C,CADF;AAKD,CAZD;;AAcAxB,QAAQ,CAAC6B,MAAT,CAAgB,oBAAC,SAAD;AAAW,EAAA,MAAM,EAAEnB,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAhB,EAA+CoB,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAA/C,E,CAEA;AACA;AACA;;AACAvB,aAAa,CAACwB,UAAd,G,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport Auth from \"./components/Auth\";\n\n// import { ApolloProvider, Query } from \"react-apollo\";\nimport ApolloClient, { gql, InMemoryCache } from \"apollo-boost\";\nimport { ApolloProvider, useQuery } from \"@apollo/react-hooks\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n// uri: \"http://example.herokuapp.com/graphql/\"\n\n// !Apollo Client is available to the entire app\n// ! fetchOptions: {credentials: 'include' - means to include operation.headers (just below in the request)}\nconst cache = new InMemoryCache();\nconst client = new ApolloClient({\n  uri: \"http://localhost:8000/graphql/\",\n  cache,\n  fetchOptions: {\n    credentials: \"include\"\n  },\n  request: operation => {\n    const token = localStorage.getItem(\"authToken\") || \"\";\n    operation.setContext({\n      headers: {\n        Authorization: `JWT ${token}`\n      }\n    });\n  }\n});\n\ncache.writeData({\n  data: {\n    isLoggedIn: !!localStorage.getItem(\"authToken\")\n  }\n});\n\nconst IS_LOGGED_IN_QUERY = gql`\n  {\n    isLoggedIn @client\n  }\n`;\n\n// ! Change the turnary below to include an authorization page, or whatever the user should see if they are not logged in.\n\n// ReactDOM.render(\n//   <ApolloProvider client={client}>\n//     <Query query={IS_LOGGED_IN_QUERY}>\n//       {({ data }) => (data.isLoggedIn ? <App /> : <Auth />)}\n//     </Query>\n//   </ApolloProvider>,\n//   document.getElementById(\"root\")\n// );\n\nconst ApolloApp = client => {\n  const { data, loading, error } = useQuery(gql`\n    {\n      isLoggedIn @client\n    }\n  `);\n\n  return (\n    <ApolloProvider client={client}>\n      {({ data }) => (data.isLoggedIn ? <App /> : <Auth />)}\n    </ApolloProvider>\n  );\n};\n\nReactDOM.render(<ApolloApp client={client} />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n// const client = new ApolloClient({\n//   uri: \"http://localhost:8000/graphql/\",\n//   fetchOptions: {\n//     credentials: \"include\"\n//   },\n//   request: operation => {\n//     const token = localStorage.getItem('authToken') || \"\";\n//     operation.setContext({\n//       headers: {\n//         Authorization: `JWT ${token}`\n//       }\n//     })\n//   },\n//   clientState: {\n//     defaults: {\n//       // !The double bangs converts any value to a boolean\n//       isLoggedIn: !!localStorage.getItem(\"authToken\")\n//     }\n//   }\n// });\n\n// Does a query on the client (not the server) and the returned value (boolean) determines what the user sees, in this case home page or authorization page\n// const IS_LOGGED_IN_QUERY = gql`\n//   query {\n//     isLoggedIn @client\n//   }\n// `;\n"]},"metadata":{},"sourceType":"module"}